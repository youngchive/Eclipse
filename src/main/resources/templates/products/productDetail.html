<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Detail</title>
    <link rel="stylesheet" href="/css/productDetail.css">
</head>
<body>
<div class="product-detail-container">
    <!-- 이미지 섹션 -->
    <div class="product-image">
        <!-- 이미지 슬라이드 -->
        <img id="productImage" th:src="@{${product.imageUrls[0]}}" alt="Product Image">

        <!-- 좌우 화살표 추가 -->
        <div class="nav-buttons">
            <button class="nav-left" onclick="showPrevImage()">&lt;</button>
            <button class="nav-right" onclick="showNextImage()">&gt;</button>
        </div>
    </div>

    <script th:inline="javascript">
        // 이미지 URL 목록 가져오기
        const imageUrls = /*[[${product.imageUrls}]]*/ [];
        let currentImageIndex = 0;

        const productImage = document.getElementById("productImage");

        // 이전 이미지 보여주기
        function showPrevImage() {
            currentImageIndex = (currentImageIndex - 1 + imageUrls.length) % imageUrls.length;
            productImage.src = imageUrls[currentImageIndex];
        }

        // 다음 이미지 보여주기
        function showNextImage() {
            currentImageIndex = (currentImageIndex + 1) % imageUrls.length;
            productImage.src = imageUrls[currentImageIndex];
        }
    </script>


    <!-- 세부 정보 섹션 -->
    <div class="product-info">
        <h1 th:text="${product.productName}">Product Name</h1>
        <p th:text="'₩' + ${#numbers.formatInteger(product.price, 3, 'COMMA')}">가격</p>

        <h3>Details</h3>
        <p th:text="${product.description}">설명</p>

        <!-- 사이즈 및 색상 옵션 -->
        <div class = "sort-dropdown-size">
            <label>사이즈</label>
            <select>
                <option th:each="option : ${product.options}"
                        th:text="${option.size}"
                        th:value="${option.size}">Size</option>
            </select>
        </div>

        <div class = "sort-dropdown-color">
            <label>색상 </label>
            <select>
                <option th:each="option : ${product.options}"
                        th:text="${option.color}"
                        th:value="${option.color}">Color</option>
            </select>
        </div>

        <!-- 총 가격 및 버튼 -->
        <div class="product-purchase">
            <h3>TOTAL: <span th:text="'₩' + ${#numbers.formatInteger(product.price, 3, 'COMMA')}"></span></h3>
            <div>
                <button>Buy now</button>
                <button id="add-product-btn"
                        th:onclick="addItem([[${product.getProductId()}]], [[${product.getProductName()}]], [[${product.getPrice()}]], 1); alert('장바구니에 상품이 담겼습니다.');"
                >Add to cart</button>
                <button onclick="location.href = '/order/cart'">장바구니</button>
                <button th:onclick="|location.href='@{/products/{productId}(productId=${product.productId})}' + '/inquiries'|">상품 문의 목록</button>
            </div>
        </div>
    </div>
</div>
</body>
<script src="/order/js/productDetail.js"></script>
</html>
